<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["ProviderName"] @ViewData["SubTitle"]</title>

    <link type="image/x-icon" rel="shortcut icon" href="/img/examination_logo-32.ico" />
    @* <link href="~/lib/layui/css/layui.css" rel="stylesheet" /> *@
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <link href="~/lib/pico2/css/pico.indigo.min.css" rel="stylesheet" />
    <link href="~/lib/pico2/css/pico.colors.min.css" rel="stylesheet" />
    <script src="~/lib/pico2/js/modal.js"></script>
    <script src="~/lib/axios/axios.min.js"></script>
    <link href="~/plugins/toastify/toastify.css" rel="stylesheet" />
    <script src="~/plugins/toastify/toastify.js"></script>
    <script src="~/web/tool.js" asp-append-version="true"></script>
    <script src="~/web/base.js" asp-append-version="true"></script>
    <script src="~/web/requestapi.js" asp-append-version="true"></script>
    <script src="~/lib/layui/layui.js"></script>
    <script src="~/web/layextend.js"></script>

   
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            margin: 0;
            font-family: Arial, sans-serif;
            height: 100%;
            display: flex;
            flex-direction: column;
            /* background: repeating-linear-gradient( -45deg, transparent, transparent 10px, rgba(0, 0, 0, 0.1) 10px, rgba(0, 0, 0, 0.1) 20px );
            color: white; */
            
            z-index: -1
        }

        
        .main {
            display: flex;
            flex-direction: column;
            flex-grow: 1; /* 让 main 区域尽可能占据剩余空间 */
            padding: 5px;
            /* min-height: 51vh; */
           
           
        }

       
    </style>
    <script>
        let requestToken = $('@Html.AntiForgeryToken()').val();
        let accountId = getCookie('accountId');
        const CT = { 'Content-Type': 'multipart/form-data' };
        let shouldSubmit = false;
        let idToken = getCookie('idToken');
    </script>
    <script type="text/html" id="selectTpl">
        <option value="0">请选择</option>
        {{# layui.each(d,function(index,item){}}
        <option value="{{ item.value }}">{{item.text}}</option>
        {{# }) }}
    </script>
</head>
<body>

    <header class="header container-fluid" id="headerBg" style="position: relative; padding: 0px;">
       @*  <h1 style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            云南在线考试平台
        </h1> *@
        <img src="~/img/header-background.jpg" id="headerBgImg" alt="Header Image" />
        <nav style="justify-content:space-content;width:76%;margin-left:12%">
            <ul id="subTitle" style="visibility:hidden">
                <li><strong>@ViewData["ProviderName"]-@ViewData["PageKeyword1"]</strong></li>
            </ul>
            <ul>
                <li id="AnswerCard" style="display:none"><a href="#" class="secondary">答题卡</a></li>
                <li>
                    <details class="dropdown">
                        <summary>
                            我的账户
                        </summary>
                        <ul dir="rtl">
                            <li><a href="https://i.xiaoxiaotong.org/">个人中心</a></li>
                            <li><a href="/activity/index">活动首页</a></li>
                            <li><a href="/report/index">报名记录</a></li>
                            <li><a id="examHistoryHref" href="javascript:;">考试成绩</a></li>
                            <li><a href="javascript:;" id="btnLogout">退出账号</a></li>
                        </ul>
                    </details>
                </li>
            </ul>
        </nav>
    </header>

    @RenderBody()
    <footer class="footer container-fluid" style="padding: 0px;">
        <img src="~/img/footer-background.jpg" id="footerBgImg" />

    </footer>

    <script>
        checkLoginStatus();

        $('#btnLogout').click(function () {
            deleteCookie('accountId');
            deleteCookie('accountName');
            deleteCookie('idToken');
            //location.href = '/account/Logout?idToken=' + idToken + '&redirectUrl=' + location.protocol + '//' + location.host + '/account/me';
            location.href = `/account/Logout?idToken=${idToken}&redirectUrl=${location.protocol}//${location.host}/account/me`;
        });
        if (accountId)
            $('#examHistoryHref').attr('href', '/exam/history?accountId=' + accountId);

        function setExamPage() {
            if (localStorage.getItem('examPageConfig')){
                const pageCfg = JSON.parse(localStorage.getItem('examPageConfig'));
                if(pageCfg.pageHost+pageCfg.pageHeader)
                    $('#headerBgImg').attr('src',pageCfg.pageHost+pageCfg.pageHeader);
                if(pageCfg.pageHost+pageCfg.pageFooter)
                    $('#footerBgImg').attr('src',pageCfg.pageHost+pageCfg.pageFooter);
                if(pageCfg.pageHost+pageCfg.pageBody){
                    $('body').attr('background',pageCfg.pageHost+pageCfg.pageBody)
                           .attr('style','background-position-y:'+$('#headerBgImg').innerHeight()+'px');
                }
            }
        }
        setExamPage()
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>